services:
  docron.testconsole:
    image: docron.testconsole
    container_name: docron-testconsole
    user: root # only for development
    build:
      context: .
      dockerfile: Docron.TestConsole/Dockerfile
    environment:
      - DockerConnection=unix:///var/run/docker.sock
    volumes:
      - /var/run/docker.sock:/var/run/docker.sock

  docron.server:
    image: docron.server
    container_name: docron
    ports:
      - 8080:8080
    environment:
      - DOCKER_CONNECTION=unix:///var/run/docker.sock
      - DB=Data Source=/data/docron.db;
      - KEY_PATH=/data/keys
      - EXCLUDED_CONTAINERS=
        - one-node-mongo
    volumes:
      - /var/run/docker.sock:/var/run/docker.sock:ro
      - /mnt/d/Temp/sqlite/:/data
  
  docron.api:
    image: docron.api
    container_name: docron
    ports:
      - 8080:8080
    environment:
      - DOCKER_CONNECTION=unix:///var/run/docker.sock
      - DB=Data Source=/data/docron.db;
      - KEY_PATH=/data/keys
      - EXCLUDED_CONTAINERS=
        - one-node-mongo
    volumes:
      - /var/run/docker.sock:/var/run/docker.sock:ro
      - /d/Temp/sqlite/:/data
  
  docron:
    image: docron
    container_name: docron
    ports:
      - 8080:8080
    environment:
      - DOCKER_CONNECTION=unix:///var/run/docker.sock
      - DB=Data Source=/data/docron.db;
      - KEY_PATH=/data/keys
      - EXCLUDED_CONTAINERS=
        - one-node-mongo
    volumes:
      - /var/run/docker.sock:/var/run/docker.sock:ro
      - /d/Temp/sqlite/:/data
    
